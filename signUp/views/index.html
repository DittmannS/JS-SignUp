<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    </head>

    <body>
        <div class="root">
            <form class="signUpForm" action="#">
                Name<br>
                <input type="text" name="name" value="Mickey">
                <br>
                Email<br>
                <input type="text" name="email" value="Mouse@micky.com">
                <br>
                Password<br>
                <input type="password" name="password" value="mutti123">
                <br><br>
                <input type="submit" value="Submit">
            </form> 
            
        </div>
        <script>
            const handleFormSubmit = event => {
                event.preventDefault();
                const data = formToJSON(form.elements);
                const output = JSON.stringify(data, null, " "); 

                const url = 'http://localhost:4001/api/users/';

                fetch(url, {
                method: 'POST', // or 'PUT'
                body: JSON.stringify(data), // data can be `string` or {object}!
                headers:{
                    'Content-Type': 'application/json'
                }
                }).then(res => res.json())
                .then(response => console.log('Success:', JSON.stringify(response)))
                .catch(error => console.error('Error:', error));
            };

            const formToJSON = elements => [].reduce.call(elements, (data, element) => {
                if(isValidElement(element)){
                    data[element.name] = element.value;
                }
                return data;
            }, {});

            const form = document.getElementsByClassName('signUpForm')[0];
            form.addEventListener('submit', handleFormSubmit);

            const isValidElement = element => {
                return element.name && element.value;
            }
        </script>
    </body>
</html>